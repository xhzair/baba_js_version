# Baba Game Screenshot Generator 使用说明

## 概述

这个截图生成器可以在不改动现有JS实验程序的情况下，生成journey章节每个关卡在high-prior和low-prior条件下的游戏界面截图，用于后续展示。

## 文件说明

### screenshot_generator_enhanced.html
- **主要版本**：使用实际游戏图像资源
- **特点**：与真实实验完全相同的视觉效果
- **适用场景**：正式展示，需要真实游戏外观时

## 使用方法

### 步骤1：启动生成器
1. 在浏览器中打开 `screenshot_generator_enhanced.html`
2. 确保文件在 `baba_js_version` 目录下，以正确加载相关资源

### 步骤2：生成截图
1. 点击 **"生成所有截图"** 按钮
2. 等待进度完成（共12个截图：6个关卡 × 2个条件）
3. 查看生成状态信息

### 步骤3：下载截图
1. **ZIP压缩包下载**：点击 **"下载所有截图 (ZIP)"** 将所有截图打包下载
2. **逐个下载**：点击 **"逐个下载截图"** 分别下载每个截图，可选择保存位置
3. **单独下载**：点击每个截图下方的 **"下载"** 按钮单独下载
4. **测试下载**：点击 **"测试下载功能"** 验证下载功能是否正常工作

## 生成的关卡

### Journey章节关卡列表：
1. **journey_environment** - 环境理解关卡
2. **journey_understandproperty** - 属性理解关卡  
3. **journey_switchidentity** - 身份切换关卡
4. **journey_break** - 规则破坏关卡
5. **journey_grammar** - 语法规则关卡
6. **journey_combination** - 组合使用关卡

### 实验条件：
- **high-prior**：游戏元素与日常生活经验高度相关
- **low-prior**：游戏元素与日常生活经验关联度较低

## 输出文件

### 文件命名格式：
```
{关卡名}_{条件类型}.png
```

### 示例：
- `journey_environment_high-prior.png`
- `journey_environment_low-prior.png`
- `journey_understandproperty_high-prior.png`
- `journey_understandproperty_low-prior.png`
- ... 等等

## 技术特点

### 主要特点：
- ✅ 使用实际游戏图像资源
- ✅ 与真实实验完全相同的视觉效果
- ✅ 自动图像资源预加载
- ✅ 错误处理和回退机制
- ✅ 无网格线，保持真实实验外观
- ✅ 无白色边框，完全匹配真实实验
- ✅ 使用真实实验的背景颜色 (#7d7d7d)
- ✅ 详细的图像加载状态反馈
- ✅ 多种下载方式：ZIP压缩包、逐个下载、单独下载

## 视觉效果

### 背景设置：
- **背景颜色**：#7d7d7d（与真实实验完全一致）
- **网格线**：无（保持真实实验外观）
- **图像资源**：使用实际游戏图像

### 回退机制：
当图像资源不可用时，使用以下颜色编码：

| 对象类型 | 颜色 | 说明 |
|---------|------|------|
| 文本对象 | 红色 (#e74c3c) | 游戏规则文本 |
| 玩家对象 | 橙色 (#f39c12) | 可控制的角色 |
| 胜利对象 | 黄色 (#f1c40f) | 目标对象 |
| 阻挡对象 | 蓝色 (#3498db) | 不可通过 |
| 推动对象 | 紫色 (#9b59b6) | 可推动 |
| 失败对象 | 深橙色 (#e67e22) | 导致失败 |
| 红色对象 | 红色 (#e74c3c) | 特殊属性 |
| 破坏对象 | 深紫色 (#8e44ad) | 破坏属性 |
| 关闭对象 | 青色 (#16a085) | 关闭属性 |
| 开启对象 | 绿色 (#27ae60) | 开启属性 |

## 注意事项

1. **文件路径**：确保在正确的目录下运行，以正确加载JS和CSS文件
2. **图像资源**：增强版本需要 `images/` 和 `text_images/` 目录下的图像文件
3. **浏览器兼容性**：建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
4. **下载权限**：某些浏览器可能需要允许下载权限
5. **下载位置**：
   - ZIP压缩包：保存到浏览器默认下载目录
   - 逐个下载：可选择保存位置（取决于浏览器设置）
   - 单独下载：可选择保存位置（取决于浏览器设置）

## 故障排除

### 常见问题：

1. **图像加载失败**
   - 检查图像文件是否存在
   - 使用基础版本作为替代

2. **JS文件加载错误**
   - 确保在正确的目录下运行
   - 检查文件路径是否正确

3. **生成失败**
   - 查看浏览器控制台错误信息
   - 检查关卡数据是否正确

4. **下载失败**
   - 点击 **"测试下载功能"** 验证基本下载功能
   - 检查浏览器下载权限设置
   - 确保浏览器允许自动下载
   - 如果仍有问题，尝试使用不同的浏览器
   - 跨域问题已通过添加 `crossOrigin` 属性和使用 `toBlob` 方法解决

## 扩展功能

如需添加新的关卡或修改现有关卡：
1. 在 `js/level-data.js` 中添加关卡数据
2. 在 `js/experimental-conditions.js` 中添加条件配置
3. 在脚本中的 `journeyLevels` 数组中添加关卡ID

## 联系信息

如有问题或建议，请联系开发团队。 